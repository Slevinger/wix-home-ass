(this["webpackJsonpwix-home-assignment"]=this["webpackJsonpwix-home-assignment"]||[]).push([[0],{149:function(e,n,t){},150:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(42),i=t.n(c),o=(t(56),t(4)),l=t(5),u=t(6);function s(){var e=Object(l.a)(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n"]);return s=function(){return e},e}function d(){var e=Object(l.a)(["\n  width: 100%;\n  .game-status-container {\n    text-align: center;\n    justify-self: center;\n    align-self: center;\n    width: 100%;\n    padding: 10px;\n    font-size: 23px;\n    z-index: 10;\n\n    .game-status {\n      background-color: rgba(255, 255, 255, 0.4);\n      display: inline-flex;\n\n      .GAME_ON {\n        color: blue;\n      }\n\n      .WON {\n        color: green;\n      }\n\n      .LOSE {\n        color: red;\n      }\n    }\n  }\n  .board-page {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 40px;\n  }\n"]);return d=function(){return e},e}function f(){var e=Object(l.a)(["\n  max-width: ","px;\n  max-height: ","px;\n  box-shadow: 1px 1px 10px 2px;\n\n  overflow: auto;\n"]);return f=function(){return e},e}function g(){var e=Object(l.a)(["\n          pointer-events: none;\n          opacity: 0.6;\n        "]);return g=function(){return e},e}function m(){var e=Object(l.a)(["\n  flex-direction: row;\n  display: flex;\n  flex-wrap: wrap;\n  justify-self:center;\n  overflow:auto;\n  width: ","px;\n  ","\n  }\n"]);return m=function(){return e},e}function p(){var e=Object(l.a)(["\n            cursor: pointer;\n          "]);return p=function(){return e},e}function b(){var e=Object(l.a)(["\n  width: ","px;\n  height: ","px;\n  line-height: ","px;\n  text-align: center;\n  border: solid thin black;\n  background-color: ",";\n  &:hover {\n    background-color: white;\n    ","\n  }\n  .fail-icon {\n    position: absolute;\n    left: -7px;\n    color: red;\n    width: 30px;\n    height: 30px;\n    font-weight: bold;\n  }\n"]);return b=function(){return e},e}function h(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  font-size: 18px;\n  line-height: 30px;\n  text-align: center;\n  align-items: center;\n  margin-left: 10px;\n  margin-right: 10px;\n"]);return h=function(){return e},e}function v(){var e=Object(l.a)(["\n  padding: 5px;\n  font-size: 15px;\n  width: 30px;\n  margin-left: 10px;\n"]);return v=function(){return e},e}function O(){var e=Object(l.a)(["\n  flex-row: column;\n  display: flex;\n  justify-content: center;\n  padding: 7px;\n  width: 100%;\n  height: 30px;\n  background-color: rgba(0, 0, 0, 0.2);\n"]);return O=function(){return e},e}var x=u.b.div(O()),j=u.b.input(v()),y=u.b.div(h()),w=u.b.div(b(),28,28,28,(function(e){var n=e.clicked,t=e.superman;return n?"white":t?"rgba(0,40,40,0.1)":"rgba(0,10,10,0.2)"}),(function(e){return e.clicked?"":Object(u.a)(p())})),k=u.b.div(m(),(function(e){return 30*e.countCols}),(function(e){return"GAME ON"!==e.status?Object(u.a)(g()):""})),E=u.b.div(f(),800,700),C=u.b.div(d()),M=(u.b.div(s(),(function(e){var n=e.countCols;return Math.min(30*n,800)}),(function(e){var n=e.countRows;return Math.min(30*n,700)})),t(7)),F=t.n(M),N=t(8),S=t(50),R=function(e){var n=e.label,t=Object(S.a)(e,["label"]);return r.a.createElement(y,null,r.a.createElement("text",null,n),r.a.createElement(j,t))},G=function(e){var n=e.state.superman,t=e.setLoading,c=e.setSuperman,i=e.createBoard,l=Object(a.useState)(20),u=Object(o.a)(l,2),s=u[0],d=u[1],f=Object(a.useState)(20),g=Object(o.a)(f,2),m=g[0],p=g[1],b=Object(a.useState)(12),h=Object(o.a)(b,2),v=h[0],O=h[1];return Object(a.useEffect)((function(){i(m,s,v)}),[]),r.a.createElement(x,null,r.a.createElement(R,{label:"Col Count",value:s,onChange:function(e){d(Number(e.target.value))}}),r.a.createElement(R,{label:"Row Count",value:m,onChange:function(e){p(Number(e.target.value))}}),r.a.createElement(R,{label:"Mines",value:v,onChange:function(e){O(Number(e.target.value))}}),r.a.createElement(R,{label:"SUPERMAN",checked:n,type:"checkbox",style:{transform:"scale(2)"},onChange:function(e){c(!n)}}),r.a.createElement("button",{onClick:Object(N.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(!0);case 2:setTimeout(Object(N.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(m,s,v);case 2:t(!1);case 3:case"end":return e.stop()}}),e)}))),0);case 3:case"end":return e.stop()}}),e)})))},"New Game"))},A=t(27),B=t(46),W=function(e){var n=e.indexes,t=e.value,c=e.id,i=e.count,o=e.superman,l=(e.reveal,e.clicked),u=e.flagged,s=e.clickCell,d=e.toggleFlag,f=(e.endGame,Object(a.useMemo)((function(){return u?r.a.createElement(A.b,{color:"red"}):o||l?t?r.a.createElement("span",{style:{display:"inline-block",position:"relative"}},r.a.createElement(A.a,{textAnchor:"middle",alignmentBaseline:"middle"}),l&&t&&r.a.createElement(B.a,{textAnchor:"middle",className:"fail-icon",alignmentBaseline:"middle"})):i>0?i:"":void 0}),[l,o,t,i,u])),g=function(){var e=Object(N.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.altKey?d(n):l||u||s(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return r.a.createElement(w,{onClick:g,clicked:l,id:c,indexes:n,superman:o},f)},L=t(47),z=t.n(L);function T(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n  align-items: center;\n  display: flex;\n  justify-content: center;\n"]);return T=function(){return e},e}var J=u.b.div(T()),P=function(){return r.a.createElement(J,null,r.a.createElement(z.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),r.a.createElement("div",{style:{fontSize:"60px",color:"white"}},"Creating new board ..."))},V=function(e){var n=e.state,t=n.map,a=n.countMines,c=n.countFlags,i=n.board,o=n.clicked,l=n.neighbors,u=n.flagged,s=n.status,d=n.superman,f=e.loading,g=e.endGame,m=e.toggleFlag,p=e.clickCell,b=e.reveal,h=a-c;return r.a.createElement("div",{className:"board-page"},f&&r.a.createElement(P,null),r.a.createElement(E,null,0===h&&"WON"!==s&&r.a.createElement("div",{style:{color:"red"}},"No More Flags"),r.a.createElement(k,{status:s,countCols:i[0].length,countRows:i.length},Object.keys(t).map((function(e,n){return r.a.createElement(W,{endGame:g,key:e,id:e,clicked:o[e],clickCell:p,reveal:b,flagged:u[e],toggleFlag:m,count:l[e],indexes:e,value:t[e],superman:d})})))))},_=t(9),D=t(3),I=function(e,n){return"row:".concat(e,",col:").concat(n)},K=function(e,n,t){for(var a=e.match(/row:([0-9]+),col:([0-9]+)/),r=Number(a[1]),c=Number(a[2]),i=[],o=Math.max(0,r-1);o<=Math.min(n-1,r+1);o++)for(var l=Math.max(0,c-1);l<=Math.min(t-1,c+1);l++)i.push([o,l]);return i},Q=(t(80),function(e,n,t){for(var a={},r={},c=[],i=t,l=e*n,u=0;u<e;u++){c.push([]);for(var s=0;s<n;s++)i/l>=Math.random()&&(r[I(u,s)]=1,i--),a[I(u,s)]=r[I(u,s)]||0,c[u].push(a[I(u,s)]),l--}var d={};return Object.keys(r).forEach((function(t){K(t,e,n).forEach((function(e){var n=Object(o.a)(e,2),t=n[0],a=n[1];d[I(t,a)]=(d[I(t,a)]||0)+1}))})),{countMines:t,width:n,height:e,status:"GAME ON",clicked:{},board:c,mines:r,map:a,neighbors:d}}),U=t(48),Y=t.n(U),$=t(49),q=t.n($),H={neighbors:{},flagged:{},map:{},mines:{},board:[],clicked:{},status:"NOT READY",superman:!1,flaggedMinesCount:0,countFlags:0},X=function(e,n){var t=n.type,a=n.payload;switch(t){case"clickCell":var r=a.indexes;return Object(D.a)({},e,{clicked:Object(D.a)({},e.clicked,Object(_.a)({},r,1))});case"flagCell":var c=a.indexes;return Object(D.a)({},e,{countFlags:e.countFlags+1,flagged:Object(D.a)({},e.flagged,Object(_.a)({},c,1))});case"decFlaggedMinesCount":return Object(D.a)({},e,{flaggedMinesCount:e.flaggedMinesCount-1});case"incFlaggedMinesCount":return Object(D.a)({},e,{flaggedMinesCount:e.flaggedMinesCount+1});case"unFlagCell":var i=a.indexes;return Object(D.a)({},e,{countFlags:e.countFlags-1,flagged:q()(e.flagged,Object.keys(e.flagged).filter((function(e){return e!==i})))});case"reset":var o=a;return Object(D.a)({},H,{},o);case"setSuperman":var l=a.isSuperman;return Object(D.a)({},e,{superman:l});case"reveal":var u=a.listOfCellsToReaveal;return Object(D.a)({},e,{clicked:Object(D.a)({},e.clicked,{},u)});case"endGame":var s=a.status;return Object(D.a)({},e,{superman:!0,status:s});case"gemeWon":return Object(D.a)({},e,{flagged:e.mines,status:"WON"});default:return e}},Z=function(){var e=Object(a.useReducer)(X,H),n=Object(o.a)(e,2),t=n[0],r=n[1],c=function(e){var n=e.additionalCells,a=e.addOrRemoveFromFlagsCount,c=Object(D.a)({},t.clicked,{},n),i=!1;if(t.height*t.width-Object.keys(c).length===t.countMines){var o=Object.keys(t.mines).filter((function(e){return!c[e]}));i=0===Y()(o,Object.keys(t.mines)).length}(i||t.flaggedMinesCount+a===t.countMines)&&r({type:"gemeWon"})},i=function(e){r({type:"endGame",payload:{status:e}})},l=function(e){r({type:"flagCell",payload:{indexes:e}}),t.mines[e]&&(r({type:"incFlaggedMinesCount"}),c({addOrRemoveFromFlagsCount:1,additionalCells:{}}))},u=function(e){r({type:"unFlagCell",payload:{indexes:e}}),t.mines[e]&&r({type:"decFlaggedMinesCount"})},s=function(e,n){var a=function(e,n){var t=function(){var e=[],n={};return{pop:function(){return e.splice(0,1)[0]},push:function(t){n[t]||(e.push(t),n[t]=t)},peek:function(){return e[e.length-1]},getQueue:function(){return e},didVisit:function(e){return!!n[e]},getVisited:function(){return n},isEmpty:function(){return 0===e.length}}}(),a={},r=n.clicked,c=n.neighbors,i=n.width,l=n.height;for(t.push(e);!t.isEmpty();)for(var u=t.pop(),s=K(u,l,i),d=0;d<s.length;d++){var f=Object(o.a)(s[d],2),g=f[0],m=f[1],p=I(g,m);a[p]=1,c[p]||r[p]||t.push(p)}return a}(I(e,n),t);r({type:"reveal",payload:{listOfCellsToReaveal:a}}),c({addOrRemoveFromFlagsCount:0,additionalCells:a})};return{state:t,clickCell:function(e){t.map[e]&&i("LOSE"),t.neighbors[e]||s(e),r({type:"clickCell",payload:{indexes:e}}),c({addOrRemoveFromFlagsCount:0,additionalCells:Object(_.a)({},e,1)})},setSuperman:function(e){r({type:"setSuperman",payload:{isSuperman:e}})},endGame:i,toggleFlag:function(e){t.flagged[e]?u(e):Object.keys(t.flagged).length<t.countMines&&l(e)},reveal:s,createBoard:function(){var e=Object(N.a)(F.a.mark((function e(n,t,a){var c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Q(n,t,a),e.next=3,r({type:"reset",payload:Object(D.a)({},c)});case 3:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()}},ee=function(e){var n=e.status,t=e.flagged,a=e.countMines-(Object.keys(t).length||0);return r.a.createElement("div",{className:"game-status-container"},r.a.createElement("div",{className:"game-status"},"Flags Lefts : (".concat(a,") "),r.a.createElement("text",{className:n.replace(" ","_"),style:{marginLeft:10}},n)))},ne=function(){var e=Z(),n=Object(a.useState)(!1),t=Object(o.a)(n,2),c=t[0],i=t[1],l=e.state.board;return r.a.createElement(C,null,r.a.createElement(G,Object.assign({setLoading:i},e)),r.a.createElement(ee,e.state),l.length>0&&r.a.createElement(V,Object.assign({loading:c},e)))};t(149);var te=function(){return r.a.createElement(ne,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,n,t){e.exports=t(150)},56:function(e,n,t){}},[[51,1,2]]]);
//# sourceMappingURL=main.b895885f.chunk.js.map